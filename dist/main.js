(()=>{"use strict";class t{constructor(t,e,n,s,a){this.title=t,this.desc=e,this.date=n,this.priority=s,this.group=a,this.complete=!1}getTitle(){return this.title}getDesc(){return this.desc}getDate(){return this.date}getPriority(){return this.priority}getComplete(){return this.complete}getGroup(){return this.group}setTitle(t){this.title=t}setDesc(t){this.desc=t}setDate(t){this.date=t}setPriority(t){this.priority=t}setComplete(t){this.complete=t}setGroup(t){this.group=t}}function e(t){const e=window.localStorage;e.removeItem("tasks"),e.setItem("tasks",JSON.stringify(t))}function n(){const t=window.localStorage;let e=JSON.parse(t.getItem("tasks"));return e||(e=[]),e}function s(){const t=window.localStorage;let e=JSON.parse(t.getItem("groups"));return null===e&&(e=["General"]),e}function a(e,n=null){const s=document.getElementById("task-title"),a=document.getElementById("task-desc"),i=document.getElementById("task-date"),c=document.getElementById("task-priority"),o=document.getElementById("task-group");let d;switch(e){case"get":d=new t(s.value,a.value,i.value,c.checked,o.value);break;case"clear":s.value="",a.value="",i.value="",c.checked=!1;break;case"set":s.value=n.title,a.value=n.desc,i.value=n.date,c.checked=n.priority,o.value=n.group}return d}function i(){const t=document.getElementById("task-title"),e=document.getElementById("task-desc"),n=document.getElementById("task-date");return""===t.value||""===e.value||""===n.value}function c(){const t=document.getElementById("content");for(;t.firstChild;)t.removeChild(t.firstChild)}function o(t){const e=t.target.getAttribute("tabIndex");document.getElementById("tasks"+e).classList.toggle("hide")}function d(){const t=document.getElementById("task-group"),e=[],n=s();for(;t.firstChild;)t.removeChild(t.firstChild);for(let t=0;t<n.length;t+=1){const s=document.createElement("option");s.innerText=n[t],s.value=n[t],e.push(s)}t.selectedIndex="0",t.append(...e)}function l(t){if("BUTTON"!==t.target.nodeName){const[e]=t.target.getElementsByClassName("task-desc"),[n]=t.target.getElementsByClassName("edit");e.classList.toggle("hide"),n.classList.toggle("hide")}}function r(t){const s=parseInt(t.target.tabIndex),a=n();a[s].complete=!0,e(a),c(),m(),t.target.tabIndex=0,o(t)}function u(t){const e=document.getElementById("task-form"),s=document.getElementById("content"),i=document.getElementById("group-button"),c=document.getElementById("task-button"),o=document.getElementById("edit-button"),l=parseInt(t.target.tabIndex),r=n();o.classList.toggle("hide"),c.classList.toggle("hide"),i.classList.toggle("hide"),s.classList.toggle("hide"),e.classList.toggle("hide"),a("set",r[l]),d(),o.tabIndex=l}function g(t,e){const s=document.getElementById("content"),a=document.createElement("button");a.classList.add("groups"),a.setAttribute("id",t+e),a.tabIndex=e,a.innerHTML='<i class="fa fa-chevron-down fa-1x" aria-hidden="true"></i>   '+t,a.addEventListener("click",o),s.append(a);const i=function(t,e){const s=document.createElement("div"),a=n();s.setAttribute("id","tasks"+e),s.classList.add("hide"),s.classList.add("tasks");const i=a.filter((e=>e.group===t)),c=[];if(0===i.length){const t=document.createElement("h2");t.innerText="No Tasks Assigned",t.setAttribute("class","empty"),c.push(t)}else for(let t=0;t<i.length;t+=1){const e=p(i[t]);c.push(e)}return s.append(...c),s}(t,e);s.appendChild(i)}function m(){const t=[],e=s();for(let n=0;n<e.length;n+=1)t.push(g(e[n],n))}function h(t){const s=parseInt(t.target.tabIndex),a=n();a.splice(s,1),e(a),c(),m();let i=new Event("click");i=t,i.target.tabIndex=0,o(i)}function p(t){const e=document.createElement("div"),s=n().findIndex((e=>JSON.stringify(t)===JSON.stringify(e)));e.classList.add("task-card"),t.priority&&e.classList.add("high-priority");const a=document.createElement("h1");a.classList.add("task-title"),a.textContent=t.title;const i=document.createElement("p");i.setAttribute("class","task-desc hide"),i.textContent=t.desc;const c=document.createElement("p");c.textContent=t.date;const o=document.createElement("div");o.classList.add("buttons");const d=document.createElement("button");d.setAttribute("class","action-button delete"),d.setAttribute("tabIndex",s),d.innerHTML='<i class="fa fa-trash-o fa-3x" aria-hidden="true"></i>',d.addEventListener("click",h);const g=document.createElement("button");g.setAttribute("class","action-button edit hide"),g.tabIndex=s,g.innerHTML=`<i class="fa fa-pencil fa-3x" tabindex =${s} aria-hidden="true"></i>`,g.addEventListener("click",u);const m=document.createElement("button");return m.setAttribute("class","action-button complete"),m.tabIndex=s,m.innerHTML=`<i class="fa fa-check fa-3x" tabindex =${s} aria-hidden="true"></i>`,m.addEventListener("click",r),t.complete&&(m.classList.add("hide"),e.classList.add("complete-task")),o.append(m,g,d),e.append(a,i,c,o),e.addEventListener("click",l),e}document.getElementById("task-button").addEventListener("click",(function(t){const s=document.getElementById("task-form"),o=document.getElementById("content"),l=document.getElementById("group-button"),r=t.target.getAttribute("data-state"),u=n();if(d(),"1"===r){const n=document.getElementById("alert");if(i())return void n.classList.remove("hide");n.classList.add("hide"),t.target.setAttribute("data-state","0");const s=a("get");a("clear"),u.push(s),e(u),c(),m()}else t.target.setAttribute("data-state","1");s.classList.toggle("hide"),o.classList.toggle("hide"),t.target.classList.toggle("full-view"),l.classList.toggle("hide")})),document.getElementById("group-button").addEventListener("click",(function(t){const e=document.getElementById("group-form"),n=document.getElementById("content"),a=document.getElementById("task-button"),i=t.target.getAttribute("data-state"),o=document.getElementById("group-name"),d=s();if("1"===i){if(""===o.value)return;t.target.setAttribute("data-state","0"),d.push(o.value),function(t){const e=window.localStorage;e.removeItem("groups"),e.setItem("groups",JSON.stringify(t))}(d),c(),m()}else t.target.setAttribute("data-state","1");e.classList.toggle("hide"),n.classList.toggle("hide"),t.target.classList.toggle("full-view"),a.classList.toggle("hide")})),document.getElementById("edit-button").addEventListener("click",(function(t){const s=document.getElementById("task-form"),o=document.getElementById("content"),d=document.getElementById("group-button"),l=document.getElementById("task-button"),r=parseInt(t.target.tabIndex),u=n(),g=a("get"),h=document.getElementById("alert");i()?h.classList.remove("hide"):(t.target.classList.toggle("hide"),l.classList.toggle("hide"),d.classList.toggle("hide"),o.classList.toggle("hide"),s.classList.toggle("hide"),a("clear"),u[r]=g,e(u),c(),m())})),d(),m()})();